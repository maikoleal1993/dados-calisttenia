<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dados 3D</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    font-family:Segoe UI, sans-serif;
    color:white;
    background: radial-gradient(circle at 30% 30%, #1a2a6c 0%, #3a1c71 50%, #0f0523 100%);
    overflow:hidden;
}

h1{
    position:absolute;
    top:20px;
    font-weight:600;
}

.scene{
    width:200px;
    height:200px;
    perspective:1000px;
}

.dice{
    width:200px;
    height:200px;
    position:relative;
    transform-style:preserve-3d;
    transform: rotateX(0deg) rotateY(0deg);
}

.face{
    position:absolute;
    width:200px;
    height:200px;
    background:white;
    border-radius:25px;
    backface-visibility:hidden;
    display:flex;
    justify-content:center;
    align-items:center;
}

.pip{
    width:28px;
    height:28px;
    background:black;
    border-radius:50%;
    position:absolute;
}

/* Posiciones 3D correctas */
.front  { transform: rotateY(0deg) translateZ(100px); }
.back   { transform: rotateY(180deg) translateZ(100px); }
.right  { transform: rotateY(90deg) translateZ(100px); }
.left   { transform: rotateY(-90deg) translateZ(100px); }
.top    { transform: rotateX(90deg) translateZ(100px); }
.bottom { transform: rotateX(-90deg) translateZ(100px); }

button{
    margin-top:40px;
    padding:15px 40px;
    font-size:18px;
    border:none;
    border-radius:30px;
    background:linear-gradient(45deg,#3bc9ff,#7b5cff);
    color:white;
    cursor:pointer;
}

.info{
    margin-top:20px;
}

footer{
    position:absolute;
    bottom:20px;
    font-size:14px;
    opacity:0.8;
}
</style>
</head>

<body>

<h1>Ludopatia Calisttenia</h1>

<div class="scene">
    <div class="dice" id="dice">
        <div class="face front"  id="f1"></div>
        <div class="face back"   id="f6"></div>
        <div class="face right"  id="f3"></div>
        <div class="face left"   id="f4"></div>
        <div class="face top"    id="f5"></div>
        <div class="face bottom" id="f2"></div>
    </div>
</div>

<button id="rollBtn">Lanzar Dados</button>

<div class="info">
Total lanzamientos: <span id="total">0</span>
</div>

<footer>Web creada y dise√±ada por "Mike Musk"</footer>

<script>
const dice = document.getElementById("dice");
const rollBtn = document.getElementById("rollBtn");
const totalSpan = document.getElementById("total");

let total = 0;

/* Crear puntos correctamente */
function createFace(faceElement, number){

    const positions = {
        1:[[50,50]],
        2:[[25,25],[75,75]],
        3:[[25,25],[50,50],[75,75]],
        4:[[25,25],[75,25],[25,75],[75,75]],
        5:[[25,25],[75,25],[50,50],[25,75],[75,75]],
        6:[[25,25],[75,25],[25,50],[75,50],[25,75],[75,75]]
    };

    positions[number].forEach(pos=>{
        const pip = document.createElement("div");
        pip.className="pip";
        pip.style.left=pos[0]+"%";
        pip.style.top=pos[1]+"%";
        pip.style.transform="translate(-50%,-50%)";
        faceElement.appendChild(pip);
    });
}

/* Crear todas las caras */
createFace(document.getElementById("f1"),1);
createFace(document.getElementById("f2"),2);
createFace(document.getElementById("f3"),3);
createFace(document.getElementById("f4"),4);
createFace(document.getElementById("f5"),5);
createFace(document.getElementById("f6"),6);

/* Rotaciones exactas para quedar de frente */
const rotations = {
    1:{x:0,y:0},
    2:{x:0,y:-90},
    3:{x:90,y:0},
    4:{x:-90,y:0},
    5:{x:0,y:90},
    6:{x:180,y:0}
};

rollBtn.addEventListener("click", ()=>{

    const roll = Math.floor(Math.random()*6)+1;
    total++;
    totalSpan.textContent = total;

    /* Giros grandes */
    const spinX = 720 + Math.floor(Math.random()*360);
    const spinY = 720 + Math.floor(Math.random()*360);

    dice.style.transition="transform 2.5s cubic-bezier(.2,.8,.2,1)";
    dice.style.transform=`rotateX(${spinX}deg) rotateY(${spinY}deg)`;

    playSound();

    /* Ajuste perfecto final */
    setTimeout(()=>{
        dice.style.transition="transform 0.4s ease-out";
        dice.style.transform=`rotateX(${rotations[roll].x}deg) rotateY(${rotations[roll].y}deg)`;
    },2200);

});

function playSound(){
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const osc = ctx.createOscillator();
    const gain = ctx.createGain();
    const pan = ctx.createStereoPanner();

    osc.type="triangle";
    osc.frequency.value=300;

    gain.gain.setValueAtTime(0.4, ctx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime+0.8);

    pan.pan.value=Math.random()*2-1;

    osc.connect(gain);
    gain.connect(pan);
    pan.connect(ctx.destination);

    osc.start();
    osc.stop(ctx.currentTime+0.8);
}
</script>

</body>
</html>


